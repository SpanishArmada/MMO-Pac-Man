<html>
<script>
    var ws = new WebSocket("ws://localhost:8888/ws");
    var playerID = 0;
    ws.onopen = function() {
        // pass row and col here
        ws.send(JSON.stringify({type: 0, row : 100, col : 100, playerID: 1}));
    };
    ws.onmessage = function (evt) {
        //alert(evt.data);
        data = JSON.parse(evt.data);

        /*
        data.grids to access grids information
            0 = empty grid
            1 = normal food
            2 = power up
            3 = cherry
            4 = wall

        data.pacPos to access pacman positions

        data.ghostPos to access ghost positions

        data.score to access player's score
        */
        if(data.type == 0) {
            playerID = data.playerID;
            alert(playerID);
        }
        else {
            alert(data.pacPos)
            pac1.innerHTML = data.pacPos["1"][0];
            pac2.innerHTML = data.pacPos["1"][1];
        }
    };
    window.onbeforeunload = function() {
        ws.send(JSON.stringify({type: 1, playerID: playerID}));
        ws.onclose = function () {}; // disable onclose handler first
        ws.close()
    };
</script>
<h1 id="pac1">5</h1>
<h1 id="pac2">5</h1>
</html>
